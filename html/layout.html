<!DOCTYPE html>
<html>
<head>
<title>重庆大学智慧党建云平台</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" type="text/css" href="../css/common.min.css" />
<link rel="stylesheet" type="text/css" href="../css/layout.min.css" />
<link rel="stylesheet" type="text/css" href="../css/summary.min.css" />
<script src="../js/jquery.js"></script>
<script src="../js/echarts.min.js"></script>
</head>
<div class="layout_page full_screen">
    <div class="top_nav">
        <img class="left_logo" src="../images/logo.png" alt="" title="logo"/>
        <div class="user_info_group">
            <p class="avatar_info">
                <img src="../images/avatar.png" alt="" title="头像"/>
                <span>
                    用户昵称
                    <span>[组织部管理员]</span>
                </span>
            </p>
            <p>
                <img src="../images/change-pwd.png" alt="" title="修改密码"/>
                <span>修改密码</span>
            </p>
            <p>
                <img src="../images/exit.png" alt="" title="退出系统"/>
                <span>退出系统</span>
            </p>
        </div>
    </div>
    <div class="content_container">
        <ul class="menu_tree" id="menu_tree">
        </ul>
        <div class="main_content">
            <!-- <iframe src="./data-statistics/summary.html"></iframe> -->
            <!-- 右侧盒子内容 -->
            <div class="summary_page">
                <ul class="total_account_group">
                    <li>
                        <p class="title_group">
                            <span class="title_icon"></span>
                            <span>全校二级党组织数目</span>
                        </p>
                        <p class="total_num">
                            <span>29999</span>个
                        </p>
                    </li>
                    <li>
                        <p class="title_group">
                            <span class="title_icon"></span>
                            <span>全校党支部数目</span>
                        </p>
                        <p class="total_num">
                            <span>29999</span>个
                        </p>
                    </li>
                    <li>
                        <p class="title_group">
                            <span class="title_icon"></span>
                            <span>全校党员数目</span>
                        </p>
                        <p class="total_num">
                            <span>29999</span>个
                        </p>
                    </li>
                    <li>
                        <p class="title_group">
                            <span class="title_icon"></span>
                            <span>组织生活总数</span>
                        </p>
                        <p class="total_num">
                            <span>29999</span>个
                        </p>
                    </li>
                </ul>
                <div class="attend_views_activity">
                    <div class="attend_views_group">
                        <div class="attend_rate_group">
                            <!-- <div class="operate_container">
                                <p>活动出勤率统计图</p>
                            </div> -->
                            <div class="attend_rate_container" id="attend_rate_container"></div>
                        </div>
                        <div class="views_group"></div>
                    </div>
                    <div class="activity_plan_group">
                    </div>
                </div>
            </div>
            <!-- 右侧盒子内容 -->
        </div>
    </div>
</div>
<script>
    var menuData = [
        {
            title:'数据统计',
            link:'',
            icon:'../images/tree-icon1',
            children:[
                {
                    title:'数据汇总',
                    link:'./data-statistics/summary.html',
                }
            ]
        },
        {
            title:'组织生活管理',
            link:'',
            children:[
                {
                    title:'活动管理',
                    link:'./data-statistics/summary.html',
                }
            ]
        },
        {
            title:'组织关系转接',
            link:'',
            children:[
                {
                    title:'组织关系转出',
                    link:'./data-statistics/summary.html',
                }
            ]
        },
        {
            title:'数据报送',
            link:'',
            children:[]
        },
        {
            title:'基础数据管理',
            link:'',
            children:[]
        },
        {
            title:'系统管理',
            link:'',
            children:[]
        },
    ]
    $(document).ready(() => {
        this.renderMenuTree();
        this.renderAttendEcharts();
    });
    $("#menu_tree").on("click"," > li", (e) => {
    });
    //渲染左侧菜单
    function renderMenuTree(){
        var treeNodes = '';
        var getNode = (i) => `<a href=${i.link ? i.link : 'javascript:;'}>${i.title}</a>`;
        menuData.map(i => {
            var treeNode = `<li>${getNode(i)}${
                ((i.children || []).length) ? `<ul class="children_node">${i.children.map(ii => {
                    return getNode(ii)
                })}</ul>` : ''
            }</li>`;
            treeNodes += treeNode;
        })
        $("#menu_tree").html(treeNodes);
    }
    //渲染出勤率图表
    function renderAttendEcharts(){
        var AttendChart = echarts.init(document.getElementById('attend_rate_container'));
        option = {
            title: {
                text: '活动出勤率统计图'
            },
            tooltip: {},
            // legend: {
            //     data:['销量']
            // },
            grid: {
                left: 0,
                right: '10%',
                top:'15%',
                bottom: '10%',
                containLabel: true
            },
            xAxis: {
                axisTick:{
                    show:true,
                },
                axisLabel: {  
                    interval:0,
                    // formatter:function(value){  
                    //     return value.split('').join('\n');  
                    // },    
                    rotate:-40,
                    textStyle: {
                        color: '#666',
                        fontSize:12,
                    },
                },
                axisLine:{
                    lineStyle:{
                        color:'#f6f6f6',
                            width:6,   //这里是坐标轴的宽度,可以去掉
                    }
                },
                data: ["音乐学院委员会","物理科学与技术...","音乐学院委员会","物理科学与技术...","音乐学院委员会","物理科学与技术...","音乐学院委员会","物理科学与技术...","音乐学院委员会","物理科学与技术...","音乐学院委员会","物理科学与技术..."]
            },
            yAxis: {
                show:false,
                // axisLine:{       //y轴
                //     show:false
                // },
                // axisTick:{       //y轴刻度线
                //     show:false
                // },
                // splitLine: {     //网格线
                //     show: false
                // }
            },
            series: [{
                name: '销量',
                type: 'bar',
                data: [5, 20, 36, 10, 10, 20,5, 20, 36, 10, 10, 20],
                barWidth: 12,
                itemStyle:{
                    normal:{
                        barBorderRadius:[7, 7, 7, 7],
                    }
                }
            }]
        };
        AttendChart.setOption(option);
    }
</script>
</html>